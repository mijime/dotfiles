#!/usr/bin/env bash

set -ue

secure_cli_path=${SECURE_CLI_PATH:-keepassxc-cli}
secure_ssh_key=${SECURE_SSH_KEY:-~/Documents/secure/my.key}
secure_db_path=${SECURE_DB_PATH:-~/Documents/secure/my.kdbx}

__main(){
  subcmd=${1:-"help"}
  shift || {
    "${secure_cli_path}" --help
    return
  }

  case "${subcmd}" in
    generate)
      "${secure_cli_path}" "${subcmd}" "${@}"
      ;;
    *)
      "${secure_cli_path}" "${subcmd}" -k "${secure_ssh_key}" "${secure_db_path}" "${@}"
      ;;
  esac
}

__main "$@"

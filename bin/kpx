#!/usr/bin/env bash

set -ue

secure_cli_path=${secure_cli_path:-keepassxc-cli}
secure_ssh_key=${secure_ssh_key:-~/Documents/secure/my.key}
secure_db_path=${secure_db_path:-~/Documents/secure/my.kdbx}


__main(){
  subcmd=${1:-"help"}
  shift || {
    "${secure_cli_path}" --help
    return
  }

  case "${subcmd}" in
    generate)
      "${secure_cli_path}" "${subcmd}" "${@}"
      ;;
    create)
      "${secure_cli_path}" "${subcmd}" -k "${secure_ssh_key}" "${secure_db_path}" "${@}"
      ;;
    *)
      "${secure_cli_path}" "${subcmd}" -k "${secure_ssh_key}" "${secure_db_path}" "${@}"
      ;;
  esac
}

__main "$@"
